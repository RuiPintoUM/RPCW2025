<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adicionar Novo Mestrado - Portal de Cursos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='add_master.css') }}">
</head>
<body>
    <div class="pagina-container">
        <div class="header-principal">
            <h1 class="titulo-principal">üéì Adicionar Novo Mestrado</h1>
            <p class="subtitulo">Preencha os dados do mestrado para adicionar √† base de dados</p>
        </div>

        <div class="conteudo-principal">
            <div class="navegacao-breadcrumb">
                <a href="{{ url_for('listar_universidades') }}">üè† In√≠cio</a>
                <span class="separador">‚Ä∫</span>
                <span>Adicionar Mestrado</span>
            </div>

            <form id="form-add-master" action="{{ url_for('adicionar_mestrado') }}" method="post" class="form-add-master">
                <!-- Informa√ß√µes B√°sicas -->
                <div class="form-section">
                    <div class="section-header">
                        <span class="section-icon">üìö</span>
                        <h2>Informa√ß√µes B√°sicas</h2>
                    </div>
                    <div class="section-content">
                        <div class="form-grid">
                            <div class="form-group span-full">
                                <label for="nome">Nome do Mestrado *</label>
                                <input type="text" id="nome" name="nome" placeholder="Ex: Mestrado em Engenharia Inform√°tica" required>
                                <div class="error-message" id="nome-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="universidade">Universidade *</label>
                                <select id="universidade" name="universidade" required>
                                    <option value="">Selecione a universidade</option>
                                    {% for uni in universidades %}
                                        <option value="{{ uni }}">{{ uni }}</option>
                                    {% endfor %}
                                </select>
                                <div class="error-message" id="universidade-error"></div>
                            </div>

                            <div class="form-group">
                                <label for="area_cientifica">√Årea Cient√≠fica</label>
                                <select id="area_cientifica" name="area_cientifica">
                                    <option value="">Selecione a √°rea cient√≠fica</option>
                                    <option value="Ci√™ncias da Computa√ß√£o">Ci√™ncias da Computa√ß√£o</option>
                                    <option value="Engenharia Inform√°tica">Engenharia Inform√°tica</option>
                                    <option value="Engenharia Civil">Engenharia Civil</option>
                                    <option value="Engenharia Mec√¢nica">Engenharia Mec√¢nica</option>
                                    <option value="Engenharia Eletrot√©cnica">Engenharia Eletrot√©cnica</option>
                                    <option value="Gest√£o">Gest√£o</option>
                                    <option value="Economia">Economia</option>
                                    <option value="Direito">Direito</option>
                                    <option value="Medicina">Medicina</option>
                                    <option value="Psicologia">Psicologia</option>
                                    <option value="Educa√ß√£o">Educa√ß√£o</option>
                                    <option value="Arquitetura">Arquitetura</option>
                                    <option value="Biologia">Biologia</option>
                                    <option value="Qu√≠mica">Qu√≠mica</option>
                                    <option value="F√≠sica">F√≠sica</option>
                                    <option value="Matem√°tica">Matem√°tica</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="regime">Regime</label>
                                <select id="regime" name="regime">
                                    <option value="">Selecione o regime</option>
                                    <option value="Diurno">Diurno</option>
                                    <option value="P√≥s-Laboral">P√≥s-Laboral</option>
                                    <option value="Misto">Misto</option>
                                    <option value="E-Learning">E-Learning</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="departamento">Departamento</label>
                                <input type="text" id="departamento" name="departamento" placeholder="Ex: Departamento de Inform√°tica">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Informa√ß√µes Detalhadas -->
                <div class="form-section">
                    <div class="section-header">
                        <span class="section-icon">üèõÔ∏è</span>
                        <h2>Informa√ß√µes Detalhadas</h2>
                    </div>
                    <div class="section-content">
                        <div class="form-group">
                            <label for="descricao">Descri√ß√£o</label>
                            <textarea id="descricao" name="descricao" rows="4" placeholder="Descri√ß√£o detalhada do mestrado..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="saidas_profissionais">Sa√≠das Profissionais</label>
                            <textarea id="saidas_profissionais" name="saidas_profissionais" rows="3" placeholder="Descreva as principais sa√≠das profissionais..."></textarea>
                        </div>

                        <div class="form-group">
                            <label for="pagina_url">URL da P√°gina Oficial</label>
                            <div class="input-with-icon">
                                <span class="input-icon">üåê</span>
                                <input type="url" id="pagina_url" name="pagina_url" placeholder="https://..." required>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Unidades Curriculares -->
                <div class="form-section">
                    <div class="section-header">
                        <span class="section-icon">üìù</span>
                        <h2>Unidades Curriculares</h2>
                    </div>
                    <div class="section-content">
                        <div id="unidades-container">
                            <!-- As unidades curriculares ser√£o adicionadas aqui dinamicamente -->
                        </div>

                        <button type="button" id="add-unidade" class="btn-add-unidade">
                            <span class="btn-icon">‚ûï</span>
                            Adicionar Unidade Curricular
                        </button>
                    </div>
                </div>

                <!-- Bot√µes de A√ß√£o -->
                <div class="form-actions">
                    <a type="button" class="btn-secundario" href="{{ url_for('listar_universidades') }}" >Cancelar</a>
                    <button type="submit" class="btn-primario">
                        <span class="btn-icon">üéì</span>
                        Adicionar Mestrado
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Template para unidade curricular -->
    <template id="template-unidade">
        <div class="unidade-card">
            <div class="unidade-header">
                <h3 class="unidade-titulo">Unidade Curricular <span class="unidade-numero"></span></h3>
                <button type="button" class="btn-remover-unidade">‚ùå</button>
            </div>
            <div class="unidade-content">
                <div class="form-grid">
                    <div class="form-group span-full">
                        <label>Nome da Unidade Curricular</label>
                        <input type="text" name="uc_nome[]" placeholder="Ex: Programa√ß√£o Orientada a Objetos">
                    </div>
                    <div class="form-group">
                        <label>ECTS</label>
                        <input type="number" name="uc_ects[]" placeholder="Ex: 6" min="0" max="30">
                    </div>
                    <div class="form-group">
                        <label>Semestre</label>
                        <select name="uc_semestre[]">
                            <option value="">Selecione o semestre</option>
                            <option value="1¬∫ Semestre">1¬∫ Semestre</option>
                            <option value="2¬∫ Semestre">2¬∫ Semestre</option>
                            <option value="Anual">Anual</option>
                        </select>
                    </div>
                    <div class="form-group span-full">
                        <label>√Årea Cient√≠fica</label>
                        <select name="uc_area_cientifica[]">
                            <option value="">Selecione a √°rea cient√≠fica</option>
                            <option value="Ci√™ncias da Computa√ß√£o">Ci√™ncias da Computa√ß√£o</option>
                            <option value="Engenharia Inform√°tica">Engenharia Inform√°tica</option>
                            <option value="Engenharia Civil">Engenharia Civil</option>
                            <option value="Engenharia Mec√¢nica">Engenharia Mec√¢nica</option>
                            <option value="Engenharia Eletrot√©cnica">Engenharia Eletrot√©cnica</option>
                            <option value="Gest√£o">Gest√£o</option>
                            <option value="Economia">Economia</option>
                            <option value="Direito">Direito</option>
                            <option value="Medicina">Medicina</option>
                            <option value="Psicologia">Psicologia</option>
                            <option value="Educa√ß√£o">Educa√ß√£o</option>
                            <option value="Arquitetura">Arquitetura</option>
                            <option value="Biologia">Biologia</option>
                            <option value="Qu√≠mica">Qu√≠mica</option>
                            <option value="F√≠sica">F√≠sica</option>
                            <option value="Matem√°tica">Matem√°tica</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('form-add-master');
            const addUnidadeBtn = document.getElementById('add-unidade');
            const unidadesContainer = document.getElementById('unidades-container');
            const template = document.getElementById('template-unidade');

            // Adicionar unidade curricular
            addUnidadeBtn.addEventListener('click', function() {
                const unidadeElement = document.importNode(template.content, true);
                const unidadeNumero = unidadesContainer.children.length + 1;
                unidadeElement.querySelector('.unidade-numero').textContent = unidadeNumero;
                
                // Adicionar evento para remover unidade
                const btnRemover = unidadeElement.querySelector('.btn-remover-unidade');
                btnRemover.addEventListener('click', function() {
                    this.closest('.unidade-card').remove();
                    // Atualizar n√∫meros das unidades
                    const unidades = unidadesContainer.querySelectorAll('.unidade-card');
                    unidades.forEach((unidade, index) => {
                        unidade.querySelector('.unidade-numero').textContent = index + 1;
                    });
                });
                
                unidadesContainer.appendChild(unidadeElement);
            });

            // Valida√ß√£o do formul√°rio
            form.addEventListener('submit', function(event) {
                let valid = true;
                
                // Validar nome
                const nome = document.getElementById('nome');
                if (!nome.value.trim()) {
                    document.getElementById('nome-error').textContent = 'Nome do mestrado √© obrigat√≥rio';
                    valid = false;
                } else {
                    document.getElementById('nome-error').textContent = '';
                }
                
                // Validar universidade
                const universidade = document.getElementById('universidade');
                if (!universidade.value) {
                    document.getElementById('universidade-error').textContent = 'Universidade √© obrigat√≥ria';
                    valid = false;
                } else {
                    document.getElementById('universidade-error').textContent = '';
                }
                
                if (!valid) {
                    event.preventDefault();
                }
            });
        });
    </script>
</body>
</html>